<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ç§‹æ²³è½å¶</title><link>https://blog.poneding.com/git/</link><description>Recent content on ç§‹æ²³è½å¶</description><generator>Hugo</generator><language>cn</language><atom:link href="https://blog.poneding.com/git/index.xml" rel="self" type="application/rss+xml"/><item><title/><link>https://blog.poneding.com/git/common-usage/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.poneding.com/git/common-usage/</guid><description>ğŸ  é¦–é¡µ / Git / Git å¸¸ç”¨
Git å¸¸ç”¨ # æœ¬ç¯‡ä¸»è¦ä»‹ç» Git çš„å¸¸ç”¨å‘½ä»¤ï¼ŒåŒ…æ‹¬ Git çš„åŸºæœ¬é…ç½®ã€åˆ›å»ºä»“åº“ã€æ·»åŠ æ–‡ä»¶ã€æäº¤æ–‡ä»¶ã€æŸ¥çœ‹çŠ¶æ€ã€æŸ¥çœ‹æäº¤å†å²ã€æ’¤é”€ä¿®æ”¹ã€åˆ é™¤æ–‡ä»¶ã€åˆ†æ”¯ç®¡ç†ã€è¿œç¨‹ä»“åº“ç­‰ã€‚
Git åŸºæœ¬é…ç½® # é…ç½® SSH å¯†é’¥ # æäº¤ä»£ç åˆ°è¿œç¨‹ä»“åº“æ—¶ï¼Œéœ€è¦ä½¿ç”¨ SSH å¯†é’¥è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå› æ­¤éœ€è¦å…ˆé…ç½® SSH å¯†é’¥ã€‚
# ç”Ÿæˆ SSH å¯†é’¥ ssh-keygen -t rsa -C poneding@gmail.com # æŸ¥çœ‹ SSH å¯†é’¥ï¼Œå¤åˆ¶åˆ° GitHub/GitLab ç­‰ SSH Keys ä¸­ cat ~/.ssh/id_rsa.pub æ·»åŠ  .ssh/config æ–‡ä»¶ï¼Œé…ç½® SSH å¯†é’¥çš„åˆ«åï¼Œæ–¹ä¾¿ç®¡ç†å¤šä¸ª SSH å¯†é’¥ã€‚
vim ~/.ssh/config ä»¥ GitHub ä¸ºä¾‹ï¼Œé…ç½®å¦‚ä¸‹ï¼š
# GitHub Host github.com HostName github.com IdentityFile ~/.ssh/id_rsa é…ç½®ç”¨æˆ·åå’Œé‚®ç®± # æäº¤ä»£ç æ—¶ï¼Œéœ€è¦é…ç½®ç”¨æˆ·åå’Œé‚®ç®±ã€‚</description></item><item><title/><link>https://blog.poneding.com/git/git-secret/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.poneding.com/git/git-secret/</guid><description>ğŸ  é¦–é¡µ / Git / ä½¿ç”¨ git-secret ä¿æŠ¤ä»“åº“æ•æ„Ÿæ•°æ®
ä½¿ç”¨ git-secret ä¿æŠ¤ä»“åº“æ•æ„Ÿæ•°æ® # å¦‚ä½•ä¿æŠ¤ git ä»“åº“ä¸­çš„æ•æ„Ÿæ•°æ®ï¼Œä¾‹å¦‚æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼Œè´¦å·å¯†ç ç­‰ï¼Ÿ
é¦–å…ˆï¼Œæœ€å¥½å…ˆå°†ä»“åº“è®¾ç½®æˆç§æœ‰ä»“åº“ï¼ç„¶åï¼Œ
ç¬¬ä¸€ç§æ–¹å¼ï¼šå¸¦æœ‰æ•æ„Ÿæ•°æ®çš„æ–‡ä»¶åŠ å…¥åˆ°. gitignoreï¼Œä¸æäº¤åˆ°ä»“åº“ä¸­ï¼› ç¬¬äºŒç§æ–¹å¼ï¼šæ•æ„Ÿæ•°æ®åº“æ–‡ä»¶åŠ å¯†åå†æäº¤åˆ°ä»“åº“ä¸­ï¼Œè¿™ä¸ªå°±æ˜¯ä»Šå¤©è¦è¯´çš„ git-secretã€‚ è¿™ä¸¤ç§æ–¹å¼éƒ½æœ‰ä¼˜ç¼ºç‚¹ï¼š
ç¬¬ä¸€ç§æ–¹å¼ï¼Œè¾ƒä¸ºé è°±ï¼Œæ•æ„Ÿæ–‡ä»¶åœ¨ git ä»“åº“ä¹‹å¤–ï¼Œæ ¹æœ¬ä¸Šé¿å…ä»“åº“æ•æ„Ÿæ•°æ®çš„æ³„éœ²ï¼Œä½†æ˜¯æ•æ„Ÿæ–‡ä»¶ä¸å—ç‰ˆæœ¬æ§åˆ¶äº†ï¼Œå¼€å‘äººå‘˜éœ€è¦åœ¨å…¶ä»–é¢‘é“åŒæ­¥æ•æ„Ÿæ–‡ä»¶çš„æ›´æ–°ï¼Œè€Œä¸”ä½¿ç”¨åˆ°è‡ªåŠ¨éƒ¨ç½²æ—¶éœ€è¦å¦å¤–å»æ‹‰å–æ•æ„Ÿæ•°æ®ï¼Œæœ€å¥½æ˜¯æœ‰è‡ªå·±çš„æ•æ„Ÿæ•°æ®é…ç½®ä¸­å¿ƒç»Ÿä¸€ç®¡ç†ï¼›
ç¬¬äºŒç§æ–¹å¼ï¼Œä½¿ç”¨ git-secret åŠ å¯†æ•æ„Ÿæ–‡ä»¶ï¼Œè¿™æ ·æ•æ„Ÿæ–‡ä»¶è¢«ä»“åº“ ignore æ‰ï¼Œè½¬è€Œæäº¤åŠ å¯†åçš„æ–‡ä»¶ï¼Œä½†æ˜¯æ•æ„Ÿæ–‡ä»¶å¦‚æœæ›´æ–°äº†å¼€å‘äººå‘˜è¦è®°å¾—å†æ¬¡åŠ å¯†ã€‚
git-secret ç®€ä»‹ # git-secret æ˜¯ä¸€ä¸ªåœ¨ git ä»“åº“ä¸­åŠ å¯†æ–‡ä»¶çš„å·¥å…·ï¼Œå°†æ•æ„Ÿæ–‡ä»¶åŠ å¯†ï¼Œå¾—åˆ°åŠ å¯†æ–‡ä»¶ï¼Œå°†æ–‡ä»¶ä¿å­˜åˆ°ä»“åº“ä¸­ï¼Œè¿™æ ·æ•æ„Ÿæ–‡ä»¶ä¹Ÿæ˜¯ç‰ˆæœ¬æ§åˆ¶ï¼Œä½ å¯ä»¥è·å–åˆ°è¯¥æ–‡ä»¶çš„æ‰€æœ‰æäº¤è®°å½•ã€‚
ä½¿ç”¨ gpg å’Œæ‰€æœ‰ä¿¡ä»»ç”¨æˆ·çš„å…¬é’¥åŠ å¯†æ–‡ä»¶ï¼Œæ¯ä¸ªä¿¡ä»»ç”¨æˆ·å¯ä»¥ä½¿ç”¨ä¸ªäººå¯†é’¥è§£å¯†æ–‡ä»¶ï¼Œå¦‚æœç”¨æˆ·ç¦»å¼€å›¢é˜Ÿï¼Œå°†åˆ é™¤ç”¨æˆ·çš„å…¬é’¥å³å¯ï¼Œä»–ä¹Ÿå°±ä¸èƒ½å†è§£å¯†æ–‡ä»¶äº†ã€‚
git-secret ä½¿ç”¨ # å‡è®¾æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªä»“åº“ git-secret-demoï¼Œä»“åº“ä¸‹æœ‰ä¸€ä¸ªåŒ…å«æ•æ„Ÿä¿¡æ¯çš„æ–‡ä»¶ secret.jsonï¼š
æˆ‘ç°åœ¨æƒ³åšçš„æ˜¯ä½¿ç”¨ git-secret å°† secret.json æ–‡ä»¶åŠ å¯†ã€‚
é¦–å…ˆå¾—å®‰è£… gpg å·¥å…· # Debian &amp;amp; Ubuntu sudo apt install gnupg -y â€‹ # Macos brew install gnupg æœ¬åœ°åˆ›å»º gpg RSA å¯†é’¥å¯¹ gpg --gen-key åœ¨åˆ›å»ºæ—¶éœ€è¦è¾“å…¥è‡ªå·±çš„ç”¨æˆ·åå’Œé‚®ç®±ï¼Œå¹¶ä¸”éœ€è¦è¾“å…¥ä½ çš„åŠ å¯†å¯†ç ã€‚</description></item><item><title/><link>https://blog.poneding.com/git/github-action-best-practice/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.poneding.com/git/github-action-best-practice/</guid><description>ğŸ  é¦–é¡µ / Git / Github Action ä½¿ç”¨æœ€ä½³å®è·µ
Github Action ä½¿ç”¨æœ€ä½³å®è·µ # Commit æ„å»º beta ç‰ˆæœ¬é•œåƒ # ä»“åº“æ ¹ç›®å½•ä¸‹åˆ›å»º .github/workflows/commit-cicd.yml æ–‡ä»¶ï¼Œç”¨äºæäº¤ä»£ç è§¦å‘ github actionã€‚
beta ç‰ˆæœ¬çš„é•œåƒ tag å‘½åè§„åˆ™ï¼š{vx.x.x}-beta-{COMMIT_ID}ï¼Œä¾‹å¦‚ï¼šv1.0.0-beta-f37cfa2
name: commit-cicd â€‹ env: BASE_VERSION: v1.0.0 â€‹ on: push: branches: [main] workflow_dispatch: â€‹ jobs: build: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 â€‹ - name: Set ENV run: | echo &amp;#34;VERSION=${BASE_VERSION}-beta-${GITHUB_SHA::7}&amp;#34; &amp;gt;&amp;gt; $GITHUB_ENV â€‹ - name: Set up QEMU uses: docker/setup-qemu-action@v2 - name: Set up Docker Buildx uses: docker/setup-buildx-action@v2 â€‹ - name: Login to docker hub uses: docker/login-action@v2 with: username: poneding password: ${{ secrets.</description></item><item><title/><link>https://blog.poneding.com/git/github-host-helm-chart/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.poneding.com/git/github-host-helm-chart/</guid><description>ğŸ  é¦–é¡µ / Git / ä½¿ç”¨ GitHub æ‰˜ç®¡ helm-chart ä»“åº“
ä½¿ç”¨ GitHub æ‰˜ç®¡ helm-chart ä»“åº“ # helm å®˜æ–¹æ–‡æ¡£ï¼š
Helm | Chart Releaser Action to Automate GitHub Page Charts åˆ›å»º GitHub ä»“åº“ï¼Œä¾‹å¦‚ï¼šhelm-chartsï¼Œå…‹éš†åˆ°æœ¬åœ°ã€‚ git clone git@github.com:[gh_id]/helm-charts.git cd helm-charts åˆ›å»ºå¹²å‡€çš„ gh-pages åˆ†æ”¯ã€‚ git checkout --orphan gh-pages git rm -rf . vim README.md # helm-charts ## Usage [Helm](https://helm.sh) must be installed to use the charts. Please refer to Helm&amp;#39;s [documentation](https://helm.sh/docs) to get started. Once Helm has been set up correctly, add the repo as follows: ```bash helm repo add mycharts https://[gh_id].</description></item><item><title/><link>https://blog.poneding.com/git/github-hosting-helm-reop/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.poneding.com/git/github-hosting-helm-reop/</guid><description>ğŸ  é¦–é¡µ / Git / GitHub æ‰˜ç®¡ helm-chart ä»“åº“
GitHub æ‰˜ç®¡ helm-chart ä»“åº“ # åˆ›å»º GitHub ä»“åº“ # åˆ›å»º GitHub helm charts ä»“åº“ï¼Œä¾‹å¦‚ï¼šhelm-chartsï¼Œå…‹éš†åˆ°æœ¬åœ°ã€‚
git clone git@github.com:poneding/helm-charts.git cd helm-charts åˆ›å»º gh-pages å­¤ç«‹åˆ†æ”¯ # git checkout --orphan gh-pages git rm -rf . vim README.md ç¼–å†™ README.md æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š
# helm-charts ## Usage [Helm](https://helm.sh) must be installed to use the charts. Please refer to Helm&amp;#39;s [documentation](https://helm.sh/docs) to get started. Once Helm has been set up correctly, add the repo as follows: ```bash helm repo add poneding https://poneding.</description></item><item><title/><link>https://blog.poneding.com/git/github/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.poneding.com/git/github/</guid><description>ğŸ  é¦–é¡µ / Git / GitHub
GitHub # GitHub æ‰˜ç®¡ helm chart ä»“åº“ # GitHub æ‰˜ç®¡ helm chart ä»“åº“
è·å–ä»“åº“æœ€æ–° Release çš„ç‰ˆæœ¬ # æ–¹æ³•ä¸€ï¼š
curl -s https://api.github.com/repos/ketches/registry-proxy/releases/latest | jq -r .tag_name æ–¹æ³•äºŒï¼š
basename $(curl -s -w %{redirect_url} https://github.com/ketches/registry-proxy/releases/latest) Â« GitHub æ‰˜ç®¡ helm-chart ä»“åº“
Â» Gitlab æ·»åŠ  K8s é›†ç¾¤</description></item><item><title/><link>https://blog.poneding.com/git/gitlab-intergrate-k8s/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.poneding.com/git/gitlab-intergrate-k8s/</guid><description>ğŸ  é¦–é¡µ / Git / Gitlab æ·»åŠ  K8s é›†ç¾¤
Gitlab æ·»åŠ  K8s é›†ç¾¤ # æœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨ Gitlab é¡¹ç›®ä¸­æ·»åŠ  K8s é›†ç¾¤ï¼Œä»¥ä¾¿ä½¿ç”¨ K8s é›†ç¾¤éƒ¨ç½² gitlab-runner å¸®æˆ‘ä»¬è¿è¡Œ gitlab çš„ CI/CDã€‚
å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š https://docs.gitlab.com/ee/user/project/clusters/add_remove_clusters.html#add-existing-cluster
æ“ä½œæ­¥éª¤ # æ‰¾åˆ°æ·»åŠ ä½ç½®ï¼š
ç™»å…¥ gitlab åï¼Œè¿›å…¥è‡ªå·±çš„é¡¹ç›®ä¸»é¡µï¼Œèœå•æ  Operations =&amp;gt; Kubernetes =&amp;gt; Add Kubernetes clusterï¼Œé€‰æ‹©é¡µç­¾ Add existing clusterã€‚
æˆ‘ä»¬åªéœ€è¦è·å–å“åº”çš„å€¼å¡«å½•åˆ°è¯¥è¡¨å•å³å¯ã€‚Kubernetes cluster name é›†ç¾¤åç§°éšæ„å¡«ï¼ŒProject namespace å¯ä¸å¡«ã€‚
è·å– API URLï¼š
è¿è¡Œä»¥ä¸‹å‘½ä»¤å¾—åˆ°è¾“å‡ºå€¼ï¼š
kubectl cluster-info | grep &amp;#39;Kubernetes master&amp;#39; | awk &amp;#39;/http/ {print $NF}&amp;#39; è·å– CA Certificateï¼š
è¿è¡Œä»¥ä¸‹å‘½ä»¤å¾—åˆ°è¾“å‡ºå€¼ï¼š</description></item><item><title/><link>https://blog.poneding.com/git/gitlab-upgrade-cross-version/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.poneding.com/git/gitlab-upgrade-cross-version/</guid><description>ğŸ  é¦–é¡µ / Git / Gitlab è·¨ç‰ˆæœ¬å‡çº§
Gitlab è·¨ç‰ˆæœ¬å‡çº§ # æœ¬æ–‡è®°å½• Gitlab è·¨ç‰ˆæœ¬å‡çº§çš„å…·ä½“æ“ä½œè¿‡ç¨‹ã€‚
æŒ‰ç…§å®˜æ–¹çš„è¯´æ³•ï¼Œgitlab å…è®¸å°ç‰ˆæœ¬ç›´æ¥å‡çº§ï¼Œå¤§ç‰ˆæœ¬éœ€è¦é˜¶æ®µå‡çº§ã€‚
è·¨ç‰ˆæœ¬å‡çº§ç¤ºä¾‹ï¼š11.0.x -&amp;gt; 11.11.x -&amp;gt; 12.0.x -&amp;gt; 12.10.x -&amp;gt; 13.0.xã€‚
å®˜æ–¹æ¨èçš„å‡çº§è·¯çº¿æ–‡æ¡£ï¼š https://docs.gitlab.com/ee/policy/maintenance.html#upgrade-recommendations
ç›®çš„ # å®ç° gitlab ç‰ˆæœ¬ï¼š11.2.3 åˆ° 13.0.0 ç‰ˆæœ¬çš„å‡çº§ï¼Œæˆ‘é€‰æ‹©çš„å‡çº§è·¯çº¿æ˜¯ï¼š11.2.3 =&amp;gt; 11.11.8 =&amp;gt; 12.0.12 =&amp;gt; 12.10.6 =&amp;gt; 13.0.0 =&amp;gt; 13.1.2
æˆ‘å½“å‰åˆ›å»º gitlab å®¹å™¨çš„è„šæœ¬å¦‚ä¸‹ï¼š
sudo docker run --detach \ --hostname gitlab.example.com \ --publish 8443:443 --publish 8080:80 --publish 8022:22 \ --name gitlab \ --restart always \ --volume /home/ubuntu/Apps/gitlab/etc/gitlab:/etc/gitlab \ --volume /home/ubuntu/Apps/gitlab/var/log/gitlab/logs:/var/log/gitlab \ --volume /home/ubuntu/Apps/gitlab/var/opt/gitlab:/var/opt/gitlab \ gitlab/gitlab-ce:11.</description></item><item><title/><link>https://blog.poneding.com/git/multi-github-account-management/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.poneding.com/git/multi-github-account-management/</guid><description>ğŸ  é¦–é¡µ / Git / å¤š GitHub è´¦å·ç®¡ç†
å¤š GitHub è´¦å·ç®¡ç† # å®é™…å¼€å‘å·¥ä½œä¸­ï¼Œä½ æœ‰å¯èƒ½å¤šä¸ª GitHub è´¦å·ï¼šä¸ªäººå¼€å‘è´¦å·ï¼Œå·¥ä½œå¼€å‘è´¦å·ã€‚
åœ¨ä»“åº“ä»£ç ç®¡ç†çš„è¿‡ç¨‹ä¸­ä½ éœ€è¦é‡å¤çš„ä½¿ç”¨ git config user.* æ¥åˆ‡æ¢ä»£ç æäº¤è´¦å·ï¼Œå¾ˆæ˜¯éº»çƒ¦ã€‚ä»¥ä¸‹æ–¹æ¡ˆå¯ä»¥å¸®ä½ è§£å†³ä½ çš„çƒ¦æ¼ã€‚
è¯·ç¡®ä¿ä½ çš„ git ç‰ˆæœ¬æœ€ä½ä¸º 2.13
~/.gitconfig
[user] name = poneding email = poneding@gmail.com [includeIf &amp;#34;gitdir:~/src/workspace/&amp;#34;] path = ~/src/workspace/.gitconfig [url &amp;#34;git@github-workspace&amp;#34;] insteadOf = git@github.com [pull] rebase = false [init] defaultBranch = master [core] excludesfile = ~/.gitignore_global ~/src/workspace/.gitconfig
[user] name = dingpeng24001 email = dingpeng24001@talkweb.com.cn [url &amp;#34;git@github-workspace&amp;#34;] insteadOf = git@github.com [pull] rebase = false [init] defaultBranch = master [core] excludesfile = ~/.</description></item><item><title/><link>https://blog.poneding.com/git/simplest-git-server/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.poneding.com/git/simplest-git-server/</guid><description>ğŸ  é¦–é¡µ / Git / æ­å»ºæœ€ç®€å•çš„ git ä»“åº“æœåŠ¡
æ­å»ºæœ€ç®€å•çš„ git ä»“åº“æœåŠ¡ # è¿œç«¯ # åˆ›å»ºä»“åº“æœåŠ¡ç›®å½•ï¼š
git init --bare git-server-demo.git å…¶å®ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯åˆ›å»ºï¼Œä½†æ˜¯ä½ é¦–å…ˆè¦å¯ä»¥èƒ½å¤Ÿé€šè¿‡ ssh çš„æ–¹å¼è¿æ¥è¿œç«¯ï¼Œä¾‹å¦‚è¿œç«¯ IP æ˜¯ 192.168.10.24
ssh root@192.168.10.24 git init --bare git-server-demo.git æ‰§è¡Œå®Œå‘½ä»¤ä¹‹åï¼Œå°†åœ¨è¿œç«¯ç›®æ ‡ç›®å½•ä¸‹ç”Ÿæˆ git-server-demo ç›®å½•ï¼Œå­ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š
tree git-server-demo.git git-server-demo.git â”œâ”€â”€ branches â”œâ”€â”€ config â”œâ”€â”€ description â”œâ”€â”€ HEAD â”œâ”€â”€ hooks â”‚Â â”œâ”€â”€ applypatch-msg.sample â”‚Â â”œâ”€â”€ commit-msg.sample â”‚Â â”œâ”€â”€ fsmonitor-watchman.sample â”‚Â â”œâ”€â”€ post-update.sample â”‚Â â”œâ”€â”€ pre-applypatch.sample â”‚Â â”œâ”€â”€ pre-commit.sample â”‚Â â”œâ”€â”€ pre-merge-commit.sample â”‚Â â”œâ”€â”€ prepare-commit-msg.</description></item></channel></rss>