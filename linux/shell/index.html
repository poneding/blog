<!doctype html><html lang=cn dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='🏠 首页 / Linux / shell 基础
shell 基础 # shell 注释 # 单行注释：
# 注释内容 多行注释：
:<<EOF 注释内容 注释内容 注释内容 EOF 或
:<<! 注释内容 注释内容 注释内容 ! 或
:<<&#39; 注释内容 注释内容 注释内容 &#39; shell 变量 # 定义变量：
my_name="Ding Peng" 使用变量：
$my_name ${my_name} 只读变量：
my_name="Ding Peng" readonly my_name 删除变量：
unset my_name 变量类型：
局部变量：在脚本或命令中定义，仅在当前shell实例有效 环境变量：所有shell实例有效 shell变量：shell程序设置的特殊变量 shell 字符串 # 单引号与双引号的区别：
单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的； 单引号字串中不能出现单独一个的单引号（对单引号使用转义符后也不行），但可成对出现，作为字符串拼接使用； 双引号里可以有变量； 双引号里可以出现转义字符 my_name="Ding Peng" hello_string="Hllo,\"$my_name\"!" echo $hello_string 获取字符串长度：'><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://blog.poneding.com/linux/shell/"><meta property="og:site_name" content="🍁 秋河落叶"><meta property="og:title" content="🍁 秋河落叶"><meta property="og:description" content='🏠 首页 / Linux / shell 基础
shell 基础 # shell 注释 # 单行注释：
# 注释内容 多行注释：
:<<EOF 注释内容 注释内容 注释内容 EOF 或
:<<! 注释内容 注释内容 注释内容 ! 或
:<<&#39; 注释内容 注释内容 注释内容 &#39; shell 变量 # 定义变量：
my_name="Ding Peng" 使用变量：
$my_name ${my_name} 只读变量：
my_name="Ding Peng" readonly my_name 删除变量：
unset my_name 变量类型：
局部变量：在脚本或命令中定义，仅在当前shell实例有效 环境变量：所有shell实例有效 shell变量：shell程序设置的特殊变量 shell 字符串 # 单引号与双引号的区别：
单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的； 单引号字串中不能出现单独一个的单引号（对单引号使用转义符后也不行），但可成对出现，作为字符串拼接使用； 双引号里可以有变量； 双引号里可以出现转义字符 my_name="Ding Peng" hello_string="Hllo,\"$my_name\"!" echo $hello_string 获取字符串长度：'><meta property="og:locale" content="cn"><meta property="og:type" content="article"><meta property="article:section" content="linux"><meta property="article:modified_time" content="2024-06-13T15:37:18+08:00"><title>Shell | 🍁 秋河落叶</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/logo.png><link rel=canonical href=https://blog.poneding.com/linux/shell/><link rel=stylesheet href=/book.min.4964903a822a7acb10dac6d1ab524833c97fb5f99b141976bcb8a47d539be9c0.css integrity="sha256-SWSQOoIqessQ2sbRq1JIM8l/tfmbFBl2vLikfVOb6cA=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/cn.search.min.e455a84312850374a504e30c4b1d27589df914ed87d8397c49c9b6148a70a882.js integrity="sha256-5FWoQxKFA3SlBOMMSx0nWJ35FO2H2Dl8Scm2FIpwqII=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><link rel=stylesheet href=/css/syntax.css></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>🍁 秋河落叶</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/><strong>🏠 首页</strong></a></li></ul><hr><ul><li><strong>📌 置顶</strong><ul><li><a href=/go/>Golang 编程</a></li><li><a href=/kubernetes/>Kubernetes</a></li><li><a href=/rust/>Rust 编程</a></li><li><a href=/git/>Git</a></li></ul></li></ul><hr><ul><li><a href=https://github.com/poneding target=_blank rel=noopener>🔗 GitHub</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Shell</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#shell-注释>shell 注释</a></li><li><a href=#shell-变量>shell 变量</a></li><li><a href=#shell-字符串>shell 字符串</a></li><li><a href=#shell-数组>shell 数组</a></li><li><a href=#shell-传参>shell 传参</a></li><li><a href=#shell-if-控制语句>shell if 控制语句</a><ul><li><a href=#空格问题>空格问题</a></li><li><a href=#文件测试表达式>文件测试表达式</a></li><li><a href=#字符串比较表达式>字符串比较表达式</a></li><li><a href=#数字比较表达式>数字比较表达式</a></li></ul></li><li><a href=#shell-运算符>shell 运算符</a><ul><li><a href=#算数运算符>算数运算符</a></li><li><a href=#关系运算符>关系运算符</a></li><li><a href=#布尔运算符>布尔运算符</a></li><li><a href=#逻辑运算符>逻辑运算符</a></li><li><a href=#字符串运算符>字符串运算符</a></li><li><a href=#文件测试运算符>文件测试运算符</a></li></ul></li><li><a href=#shell-命令>shell 命令</a><ul><li><a href=#echo>echo</a></li><li><a href=#read>read</a></li><li><a href=#printf>printf</a></li></ul></li><li><a href=#shell-变量引用>shell 变量引用</a></li><li><a href=#shell-经典实例>shell 经典实例</a><ul><li><a href=#删除确认>删除确认</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><p><a href=/>🏠 首页</a> /
<a href=/linux/>Linux</a> / shell 基础</p><h1 id=shell-基础>shell 基础
<a class=anchor href=#shell-%e5%9f%ba%e7%a1%80>#</a></h1><h2 id=shell-注释>shell 注释
<a class=anchor href=#shell-%e6%b3%a8%e9%87%8a>#</a></h2><p>单行注释：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 注释内容</span>
</span></span></code></pre></div><p>多行注释：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>:<span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=cl><span class=s>注释内容
</span></span></span><span class=line><span class=cl><span class=s>注释内容
</span></span></span><span class=line><span class=cl><span class=s>注释内容
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><p>或</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>:&lt;&lt;!
</span></span><span class=line><span class=cl>注释内容
</span></span><span class=line><span class=cl>注释内容
</span></span><span class=line><span class=cl>注释内容
</span></span><span class=line><span class=cl>!
</span></span></code></pre></div><p>或</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>:&lt;&lt;<span class=s1>&#39;
</span></span></span><span class=line><span class=cl><span class=s1>注释内容
</span></span></span><span class=line><span class=cl><span class=s1>注释内容
</span></span></span><span class=line><span class=cl><span class=s1>注释内容
</span></span></span><span class=line><span class=cl><span class=s1>&#39;</span>
</span></span></code></pre></div><h2 id=shell-变量>shell 变量
<a class=anchor href=#shell-%e5%8f%98%e9%87%8f>#</a></h2><p>定义变量：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>my_name</span><span class=o>=</span><span class=s2>&#34;Ding Peng&#34;</span>
</span></span></code></pre></div><p>使用变量：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>$my_name</span>
</span></span><span class=line><span class=cl><span class=si>${</span><span class=nv>my_name</span><span class=si>}</span>
</span></span></code></pre></div><p>只读变量：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>my_name</span><span class=o>=</span><span class=s2>&#34;Ding Peng&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> my_name 
</span></span></code></pre></div><p>删除变量：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>unset</span> my_name
</span></span></code></pre></div><p>变量类型：</p><blockquote><ol><li>局部变量：在脚本或命令中定义，仅在当前shell实例有效</li><li>环境变量：所有shell实例有效</li><li>shell变量：shell程序设置的特殊变量</li></ol></blockquote><h2 id=shell-字符串>shell 字符串
<a class=anchor href=#shell-%e5%ad%97%e7%ac%a6%e4%b8%b2>#</a></h2><blockquote><p>单引号与双引号的区别：</p><ol><li>单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的；</li><li>单引号字串中不能出现单独一个的单引号（对单引号使用转义符后也不行），但可成对出现，作为字符串拼接使用；</li><li>双引号里可以有变量；</li><li>双引号里可以出现转义字符</li></ol></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>my_name</span><span class=o>=</span><span class=s2>&#34;Ding Peng&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>hello_string</span><span class=o>=</span><span class=s2>&#34;Hllo,\&#34;</span><span class=nv>$my_name</span><span class=s2>\&#34;!&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$hello_string</span>
</span></span></code></pre></div><p>获取字符串长度：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>my_name</span><span class=o>=</span><span class=s2>&#34;dp&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=si>${#</span><span class=nv>my_name</span><span class=si>}</span> <span class=c1># 输出5</span>
</span></span></code></pre></div><p>截取字符串：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>hello_world</span><span class=o>=</span><span class=s2>&#34;Hello World!&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 从index 1截取4个字符</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=si>${</span><span class=nv>hello_world</span><span class=p>:</span><span class=nv>1</span><span class=p>:</span><span class=nv>4</span><span class=si>}</span>  <span class=c1># 输出ello</span>
</span></span></code></pre></div><h2 id=shell-数组>shell 数组
<a class=anchor href=#shell-%e6%95%b0%e7%bb%84>#</a></h2><blockquote><p>只有以为数组，没有多维数组</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 定义数组，空格隔开</span>
</span></span><span class=line><span class=cl><span class=nv>names</span><span class=o>=(</span><span class=s1>&#39;Ding Peng&#39;</span> <span class=s1>&#39;Jay Chou&#39;</span> <span class=s2>&#34;Lebron James&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 获取数组元素，根据index获取</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=si>${</span><span class=nv>names</span><span class=p>[1]</span><span class=si>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 获取数组长度</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=si>${#</span><span class=nv>names</span><span class=p>[@]</span><span class=si>}</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=si>${#</span><span class=nv>names</span><span class=p>[*]</span><span class=si>}</span>
</span></span></code></pre></div><h2 id=shell-传参>shell 传参
<a class=anchor href=#shell-%e4%bc%a0%e5%8f%82>#</a></h2><p>执行shell脚本文件时，传递参数</p><p>假如有一个test.sh文件内容如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Shell 传递参数实例！&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用$n接收参数</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;执行的文件名：</span><span class=nv>$0</span><span class=s2>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;第一个参数为：</span><span class=nv>$1</span><span class=s2>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;第二个参数为：</span><span class=nv>$2</span><span class=s2>&#34;</span><span class=p>;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>chmod +x test.sh
</span></span><span class=line><span class=cl>./test.sh <span class=m>1</span> <span class=m>2</span> 
</span></span></code></pre></div><blockquote><p>第一行命令给test.sh添加可执行权限</p><p>第二行命令执行test.sh文件</p><p>以上命令将输出：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>Shell 传递参数实例！
</span></span><span class=line><span class=cl>执行的文件名：./test.sh
</span></span><span class=line><span class=cl>第一个参数为：1
</span></span><span class=line><span class=cl>第二个参数为：2
</span></span></code></pre></div></blockquote><p>其他参数处理：</p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>$#</td><td>传递到脚本的参数个数</td></tr><tr><td>$*</td><td>以一个单字符串显示所有向脚本传递的参数</td></tr><tr><td>$$</td><td>脚本运行的当前进程ID号</td></tr><tr><td>$@</td><td>与$*相同，但是使用时加引号，并在引号中返回每个参数。</td></tr></tbody></table><h2 id=shell-if-控制语句>shell if 控制语句
<a class=anchor href=#shell-if-%e6%8e%a7%e5%88%b6%e8%af%ad%e5%8f%a5>#</a></h2><p><code>if</code> 后面需要接者 <code>then</code>：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> condition-for-test <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span>
</span></span><span class=line><span class=cl>  ...
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p>或者，</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> condition-for-test <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span>
</span></span><span class=line><span class=cl>  ...
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p>如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span> 
</span></span><span class=line><span class=cl><span class=nv>VAR</span><span class=o>=</span>myvar
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$VAR</span> <span class=o>=</span> myvar <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;1: \$VAR is </span><span class=nv>$VAR</span><span class=s2>&#34;</span>   <span class=c1># 1: $VAR is myvar</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$VAR</span><span class=s2>&#34;</span> <span class=o>=</span> myvar <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;2: \$VAR is </span><span class=nv>$VAR</span><span class=s2>&#34;</span>   <span class=c1># 2: $VAR is myvar</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$VAR</span> <span class=o>=</span> <span class=s2>&#34;myvar&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;3: \$VAR is </span><span class=nv>$VAR</span><span class=s2>&#34;</span>   <span class=c1># 3: $VAR is myvar</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$VAR</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;myvar&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;4: \$VAR is </span><span class=nv>$VAR</span><span class=s2>&#34;</span>   <span class=c1># 4: $VAR is myvar</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p>上面，我们在比较时，可以用双引号把变量引用起来。</p><p>但要注意单引号的使用。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>VAR</span><span class=o>=</span>myvar
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s1>&#39;$VAR&#39;</span> <span class=o>=</span> <span class=s1>&#39;myvar&#39;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s1>&#39;5a: $VAR is $VAR&#39;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;5b: Not equal.&#34;</span>
</span></span><span class=line><span class=cl>fibas
</span></span><span class=line><span class=cl><span class=c1># Output:</span>
</span></span><span class=line><span class=cl><span class=c1># 5b: Not equal.</span>
</span></span></code></pre></div><p>上面这个就把 <code>'$VAR'</code> 当一个字符串了。</p><p>但如果变量是多个单词，我们就必须用到双引号了，如</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1># 这样写就有问题</span>
</span></span><span class=line><span class=cl><span class=nv>VAR1</span><span class=o>=</span><span class=s2>&#34;my var&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$VAR1</span> <span class=o>=</span> <span class=s2>&#34;my var&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;\$VAR1 is </span><span class=nv>$VAR1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># error [: too many arguments</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 用双引号</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$VAR1</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;my var&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;\$VAR1 is </span><span class=nv>$VAR1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p>总的来说，双引号可以一直加上。</p><h3 id=空格问题>空格问题
<a class=anchor href=#%e7%a9%ba%e6%a0%bc%e9%97%ae%e9%a2%98>#</a></h3><p>比较表达式中，如果 <code>=</code> 前后没有空格，那么整个表法式会被认为是一个单词，其判断结果为 <code>True</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span> 
</span></span><span class=line><span class=cl><span class=nv>VAR2</span><span class=o>=</span><span class=m>2</span>
</span></span><span class=line><span class=cl><span class=c1>#  由于被识别成一个单词， [] 里面为 true</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2>&#34;</span><span class=o>=</span><span class=m>1</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2> is 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2> is not 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># 2 is 1.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 前后加上空格就好了</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=m>1</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2> is 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2> is not 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># 2 is not 1.</span>
</span></span></code></pre></div><p>另外需要注意的是， 在判断中，中括号 <code>[</code> 和变量之间一定要有一个空格，<code>=</code> 或者 <code>==</code>。 如果缺少了空格，你可能会到这类似这样的错误：<code>unary operator expected’ or missing</code>]` 。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 正确， 符号前后有空格</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$VAR2</span> <span class=o>=</span> <span class=m>1</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;\$VAR2 is 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;It&#39;s not 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># 2 is 1.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 错误， 符号前后无空格</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span><span class=nv>$VAR2</span><span class=o>=</span>1<span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2> is 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;It&#39;s not 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># line 3: =1: command not found</span>
</span></span><span class=line><span class=cl><span class=c1># line 5: [=1]: command not found</span>
</span></span><span class=line><span class=cl><span class=c1># It&#39;s not 1.</span>
</span></span></code></pre></div><h3 id=文件测试表达式>文件测试表达式
<a class=anchor href=#%e6%96%87%e4%bb%b6%e6%b5%8b%e8%af%95%e8%a1%a8%e8%be%be%e5%bc%8f>#</a></h3><p>对文件进行相关测试，判断的表达式如下：</p><table><thead><tr><th style=text-align:left>表达式</th><th style=text-align:left>True</th></tr></thead><tbody><tr><td style=text-align:left><em>file1</em> -nt <em>file2</em></td><td style=text-align:left><em>file1</em> 比 <em>file2</em> 新。</td></tr><tr><td style=text-align:left><em>file1</em> -ot <em>file2</em></td><td style=text-align:left><em>file1</em> 比 <em>file2</em> 老。</td></tr><tr><td style=text-align:left>-d <em>file</em></td><td style=text-align:left>文件<em>file</em>存在，且是一个文件夹。</td></tr><tr><td style=text-align:left>-e <em>file</em></td><td style=text-align:left>文件 <em>file</em> 存在。</td></tr><tr><td style=text-align:left>-f <em>file</em></td><td style=text-align:left>文件<em>file</em>存在，且为普通文件。</td></tr><tr><td style=text-align:left>-L <em>file</em></td><td style=text-align:left>文件<em>file</em>存在，且为符号连接。</td></tr><tr><td style=text-align:left>-O <em>file</em></td><td style=text-align:left>文件 <em>flle</em> 存在, 且由有效用户 ID 拥有。</td></tr><tr><td style=text-align:left>-r <em>file</em></td><td style=text-align:left>文件 <em>flle</em> 存在, 且是一个可读文件。</td></tr><tr><td style=text-align:left>-s <em>file</em></td><td style=text-align:left>文件 <em>flle</em> 存在, 且文件大小大于 0。</td></tr><tr><td style=text-align:left>-w file</td><td style=text-align:left>文件 <em>flle</em> 可写入。</td></tr><tr><td style=text-align:left>-x file</td><td style=text-align:left>文件 <em>flle</em> 可写执行。</td></tr></tbody></table><p>可以使用 <code>man test</code> 查看详细的说明。</p><p>当表达式为 <code>True</code> 时，测试命令返回退出状态 0，而表达式为 <code>False</code> 时返回退出状态1。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>FILE</span><span class=o>=</span><span class=s2>&#34;/etc/resolv.conf&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -e <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>[</span> -f <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>      <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2> is a file.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>fi</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>[</span> -d <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>      <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2> is a directory.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>fi</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>[</span> -r <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>      <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2> is readable.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><h3 id=字符串比较表达式>字符串比较表达式
<a class=anchor href=#%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%af%94%e8%be%83%e8%a1%a8%e8%be%be%e5%bc%8f>#</a></h3><table><thead><tr><th style=text-align:left>表达式</th><th style=text-align:left>True</th></tr></thead><tbody><tr><td style=text-align:left><em>string1 = string2</em> 或 <em>string1 == string2</em></td><td style=text-align:left>两字符相等</td></tr><tr><td style=text-align:left><em>string1</em> != <em>string2</em></td><td style=text-align:left>两个字符串不相等</td></tr><tr><td style=text-align:left><em>string1</em> > <em>string2</em></td><td style=text-align:left><em>string1</em> 大于 <em>string2</em>.</td></tr><tr><td style=text-align:left><em>string1</em> &lt; <em>string2</em></td><td style=text-align:left><em>string1</em> 小于<em>string2</em>.</td></tr><tr><td style=text-align:left>-n <em>string</em></td><td style=text-align:left>字符串长度大于0</td></tr><tr><td style=text-align:left>-z <em>string</em></td><td style=text-align:left>字符串长度等于0</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>STRING</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -z <span class=s2>&#34;</span><span class=nv>$STRING</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;There is no string.&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span> 
</span></span><span class=line><span class=cl>  <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># There is no string.</span>
</span></span></code></pre></div><p>其中 <code>>&amp;2</code> 将错误信息定位到标准错误输出。</p><h3 id=数字比较表达式>数字比较表达式
<a class=anchor href=#%e6%95%b0%e5%ad%97%e6%af%94%e8%be%83%e8%a1%a8%e8%be%be%e5%bc%8f>#</a></h3><p>下面这些是用来比较数字的一些表达式。</p><table><thead><tr><th style=text-align:left>[…]</th><th style=text-align:left>((…))</th><th style=text-align:left>True</th></tr></thead><tbody><tr><td style=text-align:left>[ “int1” -eq “int2” ]</td><td style=text-align:left>(( “int1” == “int2” ))</td><td style=text-align:left>相等.</td></tr><tr><td style=text-align:left>[ “int1” -nq “int2” ]</td><td style=text-align:left>(( “int1” != “int2” ))</td><td style=text-align:left>不等.</td></tr><tr><td style=text-align:left>[ “int1” -lt “int2” ]</td><td style=text-align:left>(( “int1” &lt; “int2” ))</td><td style=text-align:left>int2 大于 int1.</td></tr><tr><td style=text-align:left>[ “int1” -le “int2” ]</td><td style=text-align:left>(( “int1” &lt;= “int2” ))</td><td style=text-align:left>int2 大于等于 int1.</td></tr><tr><td style=text-align:left>[ “int1” -gt “int2” ]</td><td style=text-align:left>(( “int1 > “int2” ))</td><td style=text-align:left>int1 大于 int2</td></tr><tr><td style=text-align:left>[ “int1” -ge “int2” ]</td><td style=text-align:left>(( “int1 >= “int2” ))</td><td style=text-align:left>int1 大于等于 int2</td></tr></tbody></table><h2 id=shell-运算符>shell 运算符
<a class=anchor href=#shell-%e8%bf%90%e7%ae%97%e7%ac%a6>#</a></h2><h3 id=算数运算符>算数运算符
<a class=anchor href=#%e7%ae%97%e6%95%b0%e8%bf%90%e7%ae%97%e7%ac%a6>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>val1</span><span class=o>=</span><span class=sb>`</span>expr <span class=m>2</span> + 2<span class=sb>`</span>
</span></span><span class=line><span class=cl><span class=nv>val2</span><span class=o>=</span><span class=sb>`</span>expr <span class=m>2</span> - 2<span class=sb>`</span>
</span></span><span class=line><span class=cl><span class=nv>val3</span><span class=o>=</span><span class=sb>`</span>expr <span class=m>2</span> <span class=se>\*</span> 2<span class=sb>`</span> <span class=c1># *前面必须加\</span>
</span></span><span class=line><span class=cl><span class=nv>val4</span><span class=o>=</span><span class=sb>`</span>expr <span class=m>2</span> / 2<span class=sb>`</span>
</span></span><span class=line><span class=cl><span class=nv>val5</span><span class=o>=</span><span class=sb>`</span>expr <span class=m>2</span> % 2<span class=sb>`</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;2 + 2: </span><span class=nv>$val1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;2 - 2: </span><span class=nv>$val2</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;2 * 2: </span><span class=nv>$val3</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;2 / 2: </span><span class=nv>$val4</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;2 % 2: </span><span class=nv>$val5</span><span class=s2>&#34;</span>
</span></span></code></pre></div><blockquote><p>注意：</p><ul><li>使用反引号而不是单引号；</li><li>关键字expr；</li><li>运算符如：+-*/% 字符前后都需要空格，否则被认为是字符串</li></ul></blockquote><p>其他算数运算符：</p><table><thead><tr><th>运算符</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>=</td><td>赋值</td><td>a=$b</td></tr><tr><td>==</td><td>判等</td><td><code>[ $a == $b ] 返回0</code></td></tr><tr><td>!=</td><td>不等</td><td><code>[ $a != $b ] 返回1</code></td></tr></tbody></table><h3 id=关系运算符>关系运算符
<a class=anchor href=#%e5%85%b3%e7%b3%bb%e8%bf%90%e7%ae%97%e7%ac%a6>#</a></h3><table><thead><tr><th>运算符</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>-eq</td><td>等于</td><td><code>[ $a -eq $b ]</code></td></tr><tr><td>-ne</td><td>不等于</td><td></td></tr><tr><td>-gt</td><td>大于</td><td></td></tr><tr><td>-lt</td><td>小于</td><td></td></tr><tr><td>-ge</td><td>大于等于</td><td></td></tr><tr><td>-le</td><td>小于等于</td><td></td></tr></tbody></table><blockquote><p>注意：</p><ul><li>关系运算符只适用于数字，不支持字符串，除非字符串的值是数字</li></ul></blockquote><h3 id=布尔运算符>布尔运算符
<a class=anchor href=#%e5%b8%83%e5%b0%94%e8%bf%90%e7%ae%97%e7%ac%a6>#</a></h3><table><thead><tr><th>运算符</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>!</td><td>非运算</td><td><code>[ $a != $b ]</code></td></tr><tr><td>-o</td><td>或运算</td><td><code>[ $a -eq $b -o $c -eq $d ]</code></td></tr><tr><td>-a</td><td>与运算</td><td><code>[ $a -eq $b -a $c -eq $d ]</code></td></tr></tbody></table><h3 id=逻辑运算符>逻辑运算符
<a class=anchor href=#%e9%80%bb%e8%be%91%e8%bf%90%e7%ae%97%e7%ac%a6>#</a></h3><table><thead><tr><th>运算符</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>&&</td><td>与运算</td><td><code>[[ $a -eq $b && $c -eq $d ]]</code></td></tr><tr><td>||</td><td>或运算</td><td>`[[ $a -eq $b</td></tr></tbody></table><blockquote><p>说明：</p><ul><li>需要两层[]</li></ul></blockquote><h3 id=字符串运算符>字符串运算符
<a class=anchor href=#%e5%ad%97%e7%ac%a6%e4%b8%b2%e8%bf%90%e7%ae%97%e7%ac%a6>#</a></h3><table><thead><tr><th>运算符</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>=</td><td>判等</td><td><code>[ $a = $b ]</code></td></tr><tr><td>!=</td><td>不等</td><td><code>[ $a != $b ]</code></td></tr><tr><td>-z</td><td>字符长度是否为0</td><td><code>[ -z $a ]</code></td></tr><tr><td>-n</td><td>字符串长度不为0</td><td><code>[ -n $b ]</code></td></tr><tr><td>$</td><td>字符串不为空，empty或whitespace</td><td><code>[ $a ]</code></td></tr></tbody></table><h3 id=文件测试运算符>文件测试运算符
<a class=anchor href=#%e6%96%87%e4%bb%b6%e6%b5%8b%e8%af%95%e8%bf%90%e7%ae%97%e7%ac%a6>#</a></h3><table><thead><tr><th>运算符</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>-b file</td><td>是否为块设备文件</td><td><code>[ -b $filepath ]</code></td></tr><tr><td>-c file</td><td>是否为字符设备文件</td><td></td></tr><tr><td>-d file</td><td>是否为目录</td><td></td></tr><tr><td>-f file</td><td>是否为普通文件（非设备文件）</td><td></td></tr><tr><td>-g file</td><td>是否设置SGID位</td><td></td></tr><tr><td>-k file</td><td>是否设置了粘着位（sticky bit）</td><td></td></tr><tr><td>-p file</td><td>是否有名管道</td><td></td></tr><tr><td>-u file</td><td>是否设置SUID位</td><td></td></tr><tr><td>-r file</td><td>是否可读</td><td></td></tr><tr><td>-w file</td><td>是否可写</td><td></td></tr><tr><td>-x file</td><td>是否可执行</td><td></td></tr><tr><td>-s file</td><td>是否不为空文件（文件大小为0）</td><td></td></tr><tr><td>-e file</td><td>文件（目录）是否存在</td><td></td></tr><tr><td>-S file</td><td>文件是否socket</td><td></td></tr><tr><td>-L file</td><td>文件是否存在并且是一个符号链接</td><td></td></tr></tbody></table><h2 id=shell-命令>shell 命令
<a class=anchor href=#shell-%e5%91%bd%e4%bb%a4>#</a></h2><h3 id=echo>echo
<a class=anchor href=#echo>#</a></h3><p>打印字符串：</p><blockquote><ul><li>可以是带双引号，单引号，不带引号</li><li>可以转义</li><li>可以用参数</li></ul></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Hello World&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s1>&#39;Hello World&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> Hello World
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>name</span><span class=o>=</span><span class=s2>&#34;Ding Peng&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Hello, </span><span class=nv>$name</span><span class=s2>!&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -e 开启转义</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;Hi Ding,\n&#34;</span> <span class=c1># 两行之间空一行</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Nice to meet you.&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;Hi Jay,\c&#34;</span>  <span class=c1># 不会换行，都在一行内输出</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Nice to meet you.&#34;</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;Hi James,\r&#34;</span> <span class=c1># 会换行，但是没有\r也会默认换行的。</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;Nice to meet you.&#34;</span>
</span></span></code></pre></div><p>打印到某文件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Hello World&#34;</span> &gt; temp.txt 
</span></span></code></pre></div><p>变量不转义，原样输出：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>echo</span> <span class=s1>&#39;$name&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s1>&#39;\*&#39;</span>
</span></span></code></pre></div><blockquote><p>说明：</p><ul><li>需要用单引号</li></ul></blockquote><p>显示命令执行结果：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>echo</span> <span class=sb>`</span>date<span class=sb>`</span>
</span></span></code></pre></div><blockquote><p>说明：</p><ul><li>使用反引号，不是单引号</li></ul></blockquote><h3 id=read>read
<a class=anchor href=#read>#</a></h3><blockquote><p>交互，获取控制台输入并赋值给某变量</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>read</span> name
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$name</span>
</span></span></code></pre></div><h3 id=printf>printf
<a class=anchor href=#printf>#</a></h3><blockquote><p>输出命令，移植性优于echo。默认不换行，可以在字符串后添加\n</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>printf</span> <span class=s2>&#34;Hello\n&#34;</span> 
</span></span></code></pre></div><p>通过以下脚本学习printf命令的一些格式化功能</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>printf</span> <span class=s2>&#34;%-10s %-8s %-4s\n&#34;</span> 姓名 性别 体重kg  
</span></span><span class=line><span class=cl><span class=nb>printf</span> <span class=s2>&#34;%-10s %-8s %-4.2f\n&#34;</span> 郭靖 男 66.1234 
</span></span><span class=line><span class=cl><span class=nb>printf</span> <span class=s2>&#34;%-10s %-8s %-4.2f\n&#34;</span> 杨过 男 48.6543 
</span></span><span class=line><span class=cl><span class=nb>printf</span> <span class=s2>&#34;%-10s %-8s %-4.2f\n&#34;</span> 郭芙 女 47.9876 
</span></span></code></pre></div><blockquote><ul><li>%s %c %d %f都是格式替代符</li><li>%-10s 指一个宽度为10个字符（-表示左对齐，没有则表示右对齐），任何字符都会被显示在10个字符宽的字符内，如果不足则自动以空格填充，超过也会将内容全部显示出来。</li><li>%-4.2f 指格式化为小数，其中.2指保留2位小数。</li></ul></blockquote><h2 id=shell-变量引用>shell 变量引用
<a class=anchor href=#shell-%e5%8f%98%e9%87%8f%e5%bc%95%e7%94%a8>#</a></h2><p>当你要使用变量的时候，用 <code>$</code> 来引用， 如果后面要接一些其他字符，可以用 <code>{}</code> 括起来。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>WORLD</span><span class=o>=</span><span class=s2>&#34;world world&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;hello </span><span class=nv>$WORLD</span><span class=s2>&#34;</span>  <span class=c1># hello world world</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;hello </span><span class=si>${</span><span class=nv>WORLD</span><span class=si>}</span><span class=s2>2&#34;</span> <span class=c1># hello world world2</span>
</span></span></code></pre></div><p>在 Bash 中要注意 单引号 <code>'</code> ，双引号 <code>"</code> ，反引号 ` 的区别。</p><p>单引号，双引号都能用来保留引号内的为文字值，其差别在于，双引号在遇到 <code>$(参数替换)</code> ，反引号 `(命令替换) 的时候有例外，单引号则剥夺其中所有字符的特殊含义。</p><p>而反引号的作用 和 <code>$()</code> 是差不多的。 在执行一条命令的时候，会先执行其中的命令，再把结果放到原命令中。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>var</span><span class=o>=</span><span class=s2>&#34;music&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>sports</span><span class=o>=</span><span class=s1>&#39;sports&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;I like </span><span class=nv>$var</span><span class=s2>&#34;</span>   <span class=c1># I like music</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;I like </span><span class=si>${</span><span class=nv>var</span><span class=si>}</span><span class=s2>&#34;</span> <span class=c1># I like music</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> I like <span class=nv>$var</span>     <span class=c1># I like music</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s1>&#39;I like $var&#39;</span>   <span class=c1># I like $var</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;I like \$var&#34;</span>  <span class=c1># I like $var</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s1>&#39;I like \$var&#39;</span>  <span class=c1># I like \$var</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=sb>`</span>bash -version<span class=sb>`</span> <span class=c1># GNU bash, version 5.0.17(1)-release (x86_64-pc-linux-gnu)...</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s1>&#39;bash -version&#39;</span> <span class=c1># bash -version</span>
</span></span></code></pre></div><h2 id=shell-经典实例>shell 经典实例
<a class=anchor href=#shell-%e7%bb%8f%e5%85%b8%e5%ae%9e%e4%be%8b>#</a></h2><h3 id=删除确认>删除确认
<a class=anchor href=#%e5%88%a0%e9%99%a4%e7%a1%ae%e8%ae%a4>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>delete_sure
</span></span><span class=line><span class=cl>delete_sure<span class=o>(){</span>
</span></span><span class=line><span class=cl>  cat <span class=s>&lt;&lt; eof
</span></span></span><span class=line><span class=cl><span class=s>$(echo -e &#34;\033[1;36mNote:\033[0m&#34;)
</span></span></span><span class=line><span class=cl><span class=s>Delete the KubeSphere cluster, including the module kubesphere-system kubesphere-devops-system kubesphere-monitoring-system kubesphere-logging-system openpitrix-system.
</span></span></span><span class=line><span class=cl><span class=s>eof</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>read</span> -p <span class=s2>&#34;Please reconfirm that you want to delete the KubeSphere cluster.  (yes/no) &#34;</span> ans
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=o>[[</span> <span class=s2>&#34;x&#34;</span><span class=nv>$ans</span> !<span class=o>=</span> <span class=s2>&#34;xyes&#34;</span> <span class=o>&amp;&amp;</span> <span class=s2>&#34;x&#34;</span><span class=nv>$ans</span> !<span class=o>=</span> <span class=s2>&#34;xno&#34;</span> <span class=o>]]</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>read</span> -p <span class=s2>&#34;Please reconfirm that you want to delete the KubeSphere cluster.  (yes/no) &#34;</span> ans
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;x&#34;</span><span class=nv>$ans</span> <span class=o>==</span> <span class=s2>&#34;xno&#34;</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><hr><p><a href=/linux/shell-command-interval-character/>« shell 命令间隔符</a></p><p><a href=/linux/ssh-tunnel-connect-middleware/>» 使用 SSH Tunnel 连接中间件</a></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/poneding/blog/commit/5faa4f1be5d4525c49e513962394eae7c15fb6f2 title='最后修改者 poneding | 2024/06/13' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt>
<span>2024/06/13</span></a></div><div><a class="flex align-center" href=https://github.com/poneding/blog/edit/master/content/linux/shell.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt>
<span>编辑本页</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments><script src=https://giscus.app/client.js data-repo=poneding/blog data-repo-id=R_kgDOMITIHg data-category=General data-category-id=DIC_kwDOMITIHs4CgB4x data-mapping=url data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#shell-注释>shell 注释</a></li><li><a href=#shell-变量>shell 变量</a></li><li><a href=#shell-字符串>shell 字符串</a></li><li><a href=#shell-数组>shell 数组</a></li><li><a href=#shell-传参>shell 传参</a></li><li><a href=#shell-if-控制语句>shell if 控制语句</a><ul><li><a href=#空格问题>空格问题</a></li><li><a href=#文件测试表达式>文件测试表达式</a></li><li><a href=#字符串比较表达式>字符串比较表达式</a></li><li><a href=#数字比较表达式>数字比较表达式</a></li></ul></li><li><a href=#shell-运算符>shell 运算符</a><ul><li><a href=#算数运算符>算数运算符</a></li><li><a href=#关系运算符>关系运算符</a></li><li><a href=#布尔运算符>布尔运算符</a></li><li><a href=#逻辑运算符>逻辑运算符</a></li><li><a href=#字符串运算符>字符串运算符</a></li><li><a href=#文件测试运算符>文件测试运算符</a></li></ul></li><li><a href=#shell-命令>shell 命令</a><ul><li><a href=#echo>echo</a></li><li><a href=#read>read</a></li><li><a href=#printf>printf</a></li></ul></li><li><a href=#shell-变量引用>shell 变量引用</a></li><li><a href=#shell-经典实例>shell 经典实例</a><ul><li><a href=#删除确认>删除确认</a></li></ul></li></ul></nav></div></aside></main></body></html>